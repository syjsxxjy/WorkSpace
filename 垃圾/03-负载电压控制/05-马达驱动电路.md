[TOC]
## モーター駆動回路
###  モータードライバで駆動
この文章のリンク：[gitpage](https://syjsxxjy.github.io/myblog/?file=1-%E7%AC%94%E8%AE%B0%E5%A4%87%E5%BF%98%E5%BD%95/10-WorkSpace/03-%E8%B4%9F%E8%BD%BD%E7%94%B5%E5%8E%8B%E6%8E%A7%E5%88%B6/05-%E9%A9%AC%E8%BE%BE%E9%A9%B1%E5%8A%A8%E7%94%B5%E8%B7%AF)
#### モータードライバの仕様：   
型番：TA7291P  
DataSheet：https://toshiba.semicon-storage.com/info/docget.jsp?did=16128&prodName=TA7291P  
#### 駆動回路
1．BreadBorad：  
![](https://syjsxxjy.github.io/myblog/assets/1/20180704-71f425fe.png)  

2．回路図：  
![](https://syjsxxjy.github.io/myblog/assets/1/20180704-a2b40d5e.png)  

####  駆動方法
![](https://syjsxxjy.github.io/myblog/assets/1/20180704-5bbe2cdd.png)  

### プログラムのコード
```python
#!/usr/bin/env python
# -*- coding: utf-8 -

# import libraries
import  os  
import  sys
import  tty, termios
import RPi.GPIO
import time

# setup input pin for motor
In1_Motor=13   #GPIOXX
In2_Motor=19  #GPIOXX


# set up BCM GPIO numbering
RPi.GPIO.setmode(RPi.GPIO.BCM)

# set pins for Motor Diver Input Pin to output mode
RPi.GPIO.setup(In1_Motor, RPi.GPIO.OUT)
RPi.GPIO.setup(In2_Motor, RPi.GPIO.OUT)

## GPIOs Initial
RPi.GPIO.output(In1_Motor, False)
RPi.GPIO.output(In2_Motor, False)

try:
    print "Reading form keybord:"
    print "A=正方向 W=ブレーキ　S=ストップ D=逆方向　Q=Quit"
    time.sleep(0.1)
# Main loop start here
    while  True:
#get events of the controller
   	fd=sys.stdin.fileno()
        old_settings=termios.tcgetattr(fd)
        try:
            tty.setraw(fd)
            ch=sys.stdin.read(1)
        finally:
            termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)  
            #print 'error'
        if ch=='a':
            print '----------------'
            print '【move forward】'
            print '----------------'
            RPi.GPIO.output(In1_Motor, True)
            RPi.GPIO.output(In2_Motor, False)
            print (RPi.GPIO.input(In1_Motor))
            print (RPi.GPIO.input(In2_Motor))
        elif ch=='w':
            print '----------------'
            print '【Break】'
            print '----------------'
            RPi.GPIO.output(In1_Motor, True)
            RPi.GPIO.output(In2_Motor, True)
        elif ch=='s':
            print '----------------'
            print '【Stop】'
            print '----------------'
            RPi.GPIO.output(In1_Motor, False)
            RPi.GPIO.output(In2_Motor, False)
        elif ch=='d':
            print '----------------'
            print "【move backward】"
            print '----------------'
            RPi.GPIO.output(In1_Motor, False)
            RPi.GPIO.output(In2_Motor, True)
        elif ch=='q':
            print '----------------'
            print "【shutdown!】"
            print '----------------'
            break
        elif ord(ch)==0x3:
            #这个是ctrl c
            print "shutdown"
            break
        print "Reading form keybord:"
        print "A=正方向 W=ブレーキ　S=ストップ D=逆方向　Q=Quit"

finally:                   # this block will run no matter how the try block exits
    RPi.GPIO.cleanup()    # clean up after yourself
```

### 実行結果
![](https://syjsxxjy.github.io/myblog/assets/1/20180713-ff6a6374.png)  

GIF画像（少々時間かかります）:  
![](https://syjsxxjy.github.io/myblog/assets/gif/motor.gif)  

ここで画像をダウンロード:  
![Link](https://syjsxxjy.github.io/myblog/assets/gif/motor.gif)  


## 参考文献
https://www.marutsu.co.jp/contents/shop/marutsu/mame/81.html  
http://www.geocities.jp/zattouka/GarageHouse/soft/Fritzing/FritzingPart.htm  

## ソフトについて
1．Fritzing（部品図と回路図を描く）：http://fritzing.org/home/  
2．TA7291Pのファイル：[ここで](https://github.com/syjsxxjy/WorkSpace/blob/master/circuits/TA7291P.fzpz) ダウンロード  
3．回路のプロジェクトのファイル：[ここで](https://github.com/syjsxxjy/WorkSpace/blob/master/circuits/motor%20drive.fzz)ダウンロード
